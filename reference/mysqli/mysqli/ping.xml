<?xml version="1.0" encoding="utf-8"?>
<!-- EN-Revision: 9b1673cf114a1e10c4563ab9223cb56aed552b89 Maintainer: PhilDaiguille Status: ready -->
<!-- Reviewed: yes -->
<refentry xml:id="mysqli.ping" xmlns="http://docbook.org/ns/docbook">
 <refnamediv>
  <refname>mysqli::ping</refname>
  <refname>mysqli_ping</refname>
  <refpurpose>Verifica la conexión al servidor y reconecta si ya no existe</refpurpose>
 </refnamediv>

 <refsynopsisdiv>
  &warn.deprecated.function-8-4-0;
 </refsynopsisdiv>

 <refsect1 role="description">
  &reftitle.description;
  <para>&style.oop;</para>
  <methodsynopsis role="mysqli">
   <modifier role="attribute">#[\Deprecated]</modifier>
   <modifier>public</modifier> <type>bool</type><methodname>mysqli::ping</methodname>
   <void/>
  </methodsynopsis>
  <para>&style.procedural;</para>
  <methodsynopsis>
   <modifier role="attribute">#[\Deprecated]</modifier>
   <type>bool</type><methodname>mysqli_ping</methodname>
   <methodparam><type>mysqli</type><parameter>mysql</parameter></methodparam>
  </methodsynopsis>
  <para>
   Verifica si la conexión al servidor funciona correctamente. Si ha sido
   cerrada y la opción global
   <link linkend="ini.mysqli.reconnect">mysqli.reconnect</link> está activada,
   se intenta una reconexión automática.
  </para>
  <note>
   <simpara>
    El parámetro &php.ini; mysqli.reconnect es ignorado por el controlador mysqlnd, por lo tanto
    las reconexiones automáticas nunca se intentan.
   </simpara>
  </note>
  <para>
   Esta función puede ser utilizada para que los clientes que permanecen
   abiertos durante mucho tiempo sin actividad puedan verificar que la conexión no ha sido
   cerrada por el servidor y, en caso afirmativo, realizar una reconexión
   automática.
  </para>
 </refsect1>

 <refsect1 role="parameters">
  &reftitle.parameters;
  <para>
   <variablelist>
    &mysqli.link.description;
   </variablelist>
  </para>
 </refsect1>

 <refsect1 role="returnvalues">
  &reftitle.returnvalues;
  <para>
   &return.success;
  </para>
 </refsect1>

 <refsect1 role="errors">
  &reftitle.errors;
  &mysqli.conditionalexception;
 </refsect1>

 <refsect1 role="changelog">
  &reftitle.changelog;
  <informaltable>
   <tgroup cols="2">
    <thead>
     <row>
      <entry>&Version;</entry>
      <entry>&Description;</entry>
     </row>
    </thead>
    <tbody>
     <row>
      <entry>8.4.0</entry>
      <entry>
       Los métodos <methodname>mysqli::ping</methodname> y
       <function>mysqli_ping</function> están ahora obsoletos.
       La funcionalidad <literal>reconnect</literal> ya no está
       disponible desde PHP 8.2.0, lo que hace que esta función sea obsoleta.
      </entry>
     </row>
    </tbody>
   </tgroup>
  </informaltable>
 </refsect1>

 <refsect1 role="examples">
  &reftitle.examples;
  <example>
   <title>Ejemplo con <methodname>mysqli::ping</methodname></title>
   <para>&style.oop;</para>
   <programlisting role="php">
<![CDATA[
<?php
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* Verificación de la conexión */
if ($mysqli->connect_errno) {
    printf("Conexión fallida: %s\n", $mysqli->connect_error);
    exit();
}

/* Verificación si la conexión sigue activa */
if ($mysqli->ping()) {
    printf ("¡La conexión está bien!\n");
} else {
    printf ("Error: %s\n", $mysqli->error);
}

/* Cierre de la conexión */
$mysqli->close();
?>
]]>
   </programlisting>
   <para>&style.procedural;</para>
   <programlisting role="php">
<![CDATA[
<?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* Verificación de la conexión */
if (mysqli_connect_errno()) {
    printf("Fallo en la conexión: %s\n", mysqli_connect_error());
    exit();
}

/* Verificación si la conexión sigue activa */
if (mysqli_ping($link)) {
    printf ("¡La conexión está bien!\n");
} else {
    printf ("Error: %s\n", mysqli_error($link));
}

/* Cierre de la conexión */
mysqli_close($link);
?>
]]>
   </programlisting>
   &examples.outputs;
   <screen>
<![CDATA[
¡La conexión es válida!
]]>
   </screen>
  </example>
 </refsect1>

</refentry>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
